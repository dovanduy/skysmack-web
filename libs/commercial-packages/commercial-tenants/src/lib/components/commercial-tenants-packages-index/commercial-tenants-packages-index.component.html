<div class="wrapper">
  <h1>Packages</h1>

  <!-- Category filter -->
  <mat-form-field>
    <mat-label>Category</mat-label>
    <mat-select (selectionChange)="selectedCategoryChanged($event)" [value]="(selectedCategory$ | async)">
      <mat-option [value]="''">
        All
      </mat-option>
      <mat-option *ngFor="let category of categories$ | async" [value]="category">
        {{ category }}
      </mat-option>
    </mat-select>
  </mat-form-field>


  <!-- Package search -->
  <mat-form-field>
    <input matInput [placeholder]="'Search for a package' | translate" aria-label="Package"
      [formControl]="availablePackagesAutoCompleteControl">
  </mat-form-field>

  <!-- Packages -->
  <div class="grid">
    <ng-container *ngFor="let _package of filteredAvailablePackages$ | async">
      <div class="grid-item">
        <mat-card [routerLink]="['/', 'tenants', 'packages', _package.category, _package.name]">
          <mat-card-header>
            <mat-card-title>{{ _package.name }}</mat-card-title>
          </mat-card-header>

          <mat-card-content>
            <p *ngIf="_package.dependencyTypes">Dep count: {{ _package.dependencyTypes.length }}</p>
            <p *ngIf="!_package.dependencyTypes">Dep count: 0</p>
          </mat-card-content>
        </mat-card>
      </div>
    </ng-container>
  </div>
</div>