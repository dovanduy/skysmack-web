<div class="wrapper">
  <!-- Loading -->
  <ng-container *ngIf="!selectedPackage && !couldNotFindPackage">
    <h3>Loading...</h3>
  </ng-container>

  <!-- Package not found -->
  <ng-container *ngIf="!selectedPackage && couldNotFindPackage">
    <h3>Package not found</h3>
    <a [routerLink]="['/', 'tenants', 'packages']">Go back to packages overview</a>
  </ng-container>

  <!-- Package type selected -->
  <ng-container *ngIf="selectedPackage">
    <div class="flex-container">
      <h1>{{ selectedPackage.name }}</h1>
      <mat-chip-list class="state-chip">
        <mat-chip color="default">{{ getDevelopmentState(selectedPackage.state) }}</mat-chip>
      </mat-chip-list>
      <a [routerLink]="['/', 'tenants', 'packages']">Packages overview</a>
    </div>

    <mat-card>
      <mat-card-content *ngIf="selectedPackage">
        <p>Description: {{ selectedPackage.description }}</p>
        <p>Category: {{ selectedPackage.category }}</p>
        <p>Required: {{ selectedPackage.required ? 'Yes' : 'No'}}</p>
        <p>Multiple installs: {{ selectedPackage.multipleInstalls ? 'Yes' : 'No' }}</p>

        <p *ngIf="dependencies">Dependencies:
          <ng-container *ngFor="let dep of dependencies; let last = last">
            <a [routerLink]="['/', 'tenants', 'packages', dep.category, dep.name]">{{ dep.name }}<span *ngIf="!last">,
              </span></a>
          </ng-container>
        </p>
      </mat-card-content>
    </mat-card>

    <!-- Upgrades -->
    <ng-container *ngIf="getDependentPackages(selectedPackage.type) as packages">
      <h3 *ngIf="packages && packages.length > 0">Upgrades</h3>
      <h3 *ngIf="!packages || packages.length === 0">Cannot be upgraded.</h3>

      <div class="grid">
        <ng-container *ngFor="let _package of packages">
          <div class="grid-item">
            <mat-card class="upgrade" [routerLink]="['/', 'tenants', 'packages', _package.category, _package.name]">
              <mat-card-header>
                <mat-card-title>{{ _package.name }}</mat-card-title>
              </mat-card-header>
            </mat-card>
          </div>
        </ng-container>
      </div>
    </ng-container>
  </ng-container>
</div>