<ss-container [componentKey]="'lodging-types-availability-index'" [componentKey]="componentKey">

  <!-- Calendar -->
  <ng-template #customCellTemplate let-day="day" let-locale="locale">
    <ng-container *ngIf="day.freeLodgingTypes">
      <div class="cal-cell-top">
        <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
      </div>
      <div class="cell-totals">
        <ng-container *ngFor="let freeLodgingTypes of day.freeLodgingTypes; trackBy: trackById">
          <p *ngIf="freeLodgingTypes.count > 0" style="color:green;">{{ freeLodgingTypes.name }}: {{
            freeLodgingTypes.count }}</p>
          <p *ngIf="!freeLodgingTypes.count || freeLodgingTypes.count === 0" style="color:black;">
            {{ freeLodgingTypes.name }}: {{ freeLodgingTypes.count }}</p>
          <p *ngIf="freeLodgingTypes.count < 0" style="color:red;">{{ freeLodgingTypes.name }}: {{
              freeLodgingTypes.count }}</p>
        </ng-container>
      </div>
    </ng-container>
  </ng-template>

  <ng-container *ngIf="events$ | async as events">

    <mat-card [ngSwitch]="view">
      <div style="text-align:right; padding: 0 16px">
        <!-- Lodging types selection -->
        <mat-form-field style="width:200px;margin-right:16px">
          <mat-select [(value)]="selectedLodgingTypeIds" (selectionChange)="getAvailableLodgingTypesDailyCount($event)"
            [placeholder]="'LODGING_TYPES.AVAILABILITY.PLACEHOLDER' | translate" multiple>
            <mat-option *ngFor="let opt of lodgingTypeOptions$ | async" [value]="opt.value">
              {{opt.displayName}}</mat-option>
          </mat-select>
        </mat-form-field>

        <button mat-icon-button mwlCalendarToday [(viewDate)]="viewDate"
          matTooltip="{{ 'LODGING_TYPES.AVAILABILITY.TODAY' | translate }}">
          <mat-icon>calendar_today</mat-icon>
        </button>

        <button mat-icon-button mwlCalendarPreviousView [view]="view" [(viewDate)]="viewDate"
          matTooltip="{{ 'LODGING_TYPES.AVAILABILITY.PREVIOUS' | translate }}">
          <mat-icon>chevron_left</mat-icon>
        </button>

        <button mat-icon-button mwlCalendarNextView [view]="view" [(viewDate)]="viewDate"
          matTooltip="{{ 'LODGING_TYPES.AVAILABILITY.NEXT' | translate }}">
          <mat-icon>chevron_right</mat-icon>
        </button>
        <h2 style="float:left;margin-top: 8px">
          {{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}
        </h2>
      </div>

      <ss-monthly-calendar-view *ngSwitchCase="'month'" [viewDate]="viewDate" [events]="events"
        (dayClicked)="viewDate = $event.day.date;" (beforeViewRender)="beforeMonthViewRender($event)"
        [cellTemplate]="customCellTemplate">
      </ss-monthly-calendar-view>
    </mat-card>
  </ng-container>
</ss-container>