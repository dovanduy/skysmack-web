<div class="cal-month-view">
    <mwl-calendar-month-view-header [days]="columnHeaders" [locale]="locale" [customTemplate]="headerTemplate">
    </mwl-calendar-month-view-header>
    <div class="cal-days">
        <div *ngFor="let rowIndex of view.rowOffsets">
            <div class="cal-cell-row">

                <!-- Insert the week number here, you should probably add some styling to make it prettier -->
                <!-- <div>Week {{ view.days[rowIndex].date | weekNo }}</div> -->

                <mwl-calendar-month-cell
                    *ngFor="let day of view.days | slice : rowIndex : rowIndex + (view.totalDaysVisibleInWeek)"
                    [class.cal-drag-over]="day.dragOver" [ngClass]="day?.cssClass" [day]="day" [openDay]="openDay"
                    [locale]="locale" [tooltipPlacement]="tooltipPlacement" [tooltipTemplate]="tooltipTemplate"
                    [customTemplate]="cellTemplate" (click)="dayClicked.emit({day: day})"
                    (highlightDay)="toggleDayHighlight($event.event, true)"
                    (unhighlightDay)="toggleDayHighlight($event.event, false)" mwlDroppable
                    (dragEnter)="day.dragOver = true" (dragLeave)="day.dragOver = false"
                    (drop)="day.dragOver = false; eventDropped(day, $event.dropData.event)"
                    (eventClicked)="eventClicked.emit({event: $event.event})">
                </mwl-calendar-month-cell>
            </div>
            <mwl-calendar-open-day-events [isOpen]="openRowIndex === rowIndex" [events]="openDay?.events"
                [customTemplate]="openDayEventsTemplate" (eventClicked)="eventClicked.emit({event: $event.event})">
            </mwl-calendar-open-day-events>
        </div>
    </div>
</div>