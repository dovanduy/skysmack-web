<nav *ngIf="skysmack$ | async as skysmack" class="docs-navbar-header">
  <!-- APP DRAWER -->
  <a class="link" mat-icon-button (click)="uiStore.toggleMenuFor('drawer')"
    title="{{ 'UI.TOP_BAR.PACKAGES'| translate}}">
    <mat-icon aria-label="Open packages">apps</mat-icon>
  </a>

  <a mat-button class="link" routerLink="/" (click)="uiStore.setPackageDrawerStatus(false)" aria-label="Skysmack">
    <span>{{ skysmack.name }}</span>
  </a>

  <div class="flex-spacer"></div>

  <!-- ONLINE STATUS -->
  <ss-online-status></ss-online-status>

  <!-- QUEUE -->
  <!-- *isAuthenticated -->
  <ss-queue></ss-queue>

  <!-- SEARCH -->
  <button mat-icon-button class="link" (click)="uiStore.toggleMenuFor('search')" *isAuthenticated>
    <mat-icon>search</mat-icon>
  </button>
  <div *ngIf="menu$ | async as menu" class="search-bar" [ngClass]="{ 'open' : menu.search }">
    <input type="text" [placeholder]="'UI.TOP_BAR.SEARCH' | translate" class="search-field" />
  </div>

  <!-- CHAT -->
  <!-- <ng-container *isAuthenticated>
    <button mat-icon-button class="link" [matMenuTriggerFor]="chatMenu">
      <mat-icon aria-label="Open chat">chat</mat-icon>
    </button>
    <mat-menu overlapTrigger="false" #chatMenu="matMenu">
      <span [translate]="'UI.TOP_BAR.NO_CONVER'"></span>
    </mat-menu>
  </ng-container> -->

  <!-- NOTIFICATIONS -->
  <!-- <ng-container *isAuthenticated>
    <button class="link"  mat-icon-button [matMenuTriggerFor]="notificationsMenu">
      <mat-icon>notifications</mat-icon>
    </button>
    <mat-menu overlapTrigger="false" #notificationsMenu="matMenu">
      <span [translate]="'UI.TOP_BAR.NO_NOTI'"></span>
    </mat-menu>
  </ng-container> -->

  <!-- LANGUAGE -->
  <ss-language-select></ss-language-select>

  <!-- LOGIN -->
  <ng-container *ngIf="authenticationPackages$ | async as authPackages">
    <!-- Single auth package -->
    <ng-container *ngIf="authPackages.length === 1">
      <a class="link" mat-icon-button title="Account Menu" [routerLink]="[authPackages[0].path]"
        (click)="uiStore.setPackageDrawerStatus(false)" *isAnonymous>
        <mat-icon aria-label="authPackages[0].description">account_circle</mat-icon>
      </a>
    </ng-container>

    <!-- Multiple auth package -->
    <ng-container *ngIf="authPackages.length > 1">
      <ng-container *isAnonymous>
        <button class="link" mat-icon-button [matMenuTriggerFor]="loginMenu">
          <mat-icon>account_circle</mat-icon>
        </button>
        <mat-menu overlapTrigger="false" #loginMenu="matMenu">
          <ng-container *ngFor="let authPackage of authPackages">
            <button mat-menu-item [routerLink]="['/' + authPackage.path]" title="Account Menu" *isAnonymous>
              {{ authPackage.name }}
            </button>
          </ng-container>
        </mat-menu>
      </ng-container>
    </ng-container>
  </ng-container>


  <!-- ACCOUNT -->
  <ng-container *isAuthenticated>
    <button class="link" mat-icon-button [matMenuTriggerFor]="accountMenu">
      <mat-icon>account_circle</mat-icon>
    </button>
    <mat-menu overlapTrigger="false" #accountMenu="matMenu">
      <button mat-menu-item *ngFor="let accountPackage of accountPackages$ | async"
        [routerLink]="['/' + accountPackage.path]">{{ accountPackage.name }}</button>
      <button mat-menu-item class="non-anchor" (click)="logout()" [routerLink]="['/']">{{
        'UI.TOP_BAR.LOG_OUT'| translate }}</button>
    </mat-menu>
  </ng-container>
</nav>

<ss-package-drawer></ss-package-drawer>