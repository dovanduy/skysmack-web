<ng-content></ng-content>

<ng-container *ngIf="editorItem$ | async as editorItem">
  <ng-container *ngIf="editorItem.apiError">
    <h5 style="color:red;">{{ editorItem.apiError.title }}</h5>
    <p style="color:red;">{{ editorItem.apiError.detail }}</p>
  </ng-container>
</ng-container>

<form *ngIf="fh" [formGroup]="fh.form">

  <ng-container *ngFor="let field of fields$ | async as fields; trackBy: trackByFieldKey">
    <ng-container *inAnyPermission="field.permissions">
      <ss-dynamic-form-field-template *ngIf="field.component" [field]="field" [fh]="fh" [fieldKey]="field.key"
        [fields]="fields" [rules]="rules">
      </ss-dynamic-form-field-template>
    </ng-container>
  </ng-container>

  <button mat-raised-button color="primary" type="submit" (click)="onSubmit()"
    [disabled]="disableButton">{{ buttonText }}</button>

  <ng-container *ngIf="!production">
    <p>Form values</p>
    <pre>{{ fh.form.value | json }}</pre>
    <p>Extented data preview</p>
    <pre>{{ previewExtendedData() | json }}</pre>
  </ng-container>
</form>